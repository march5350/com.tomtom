<div class="hy-view visible" data-id="login_tomtom" data-template-id="login_tomtom">
    <div class="hy-tmpl-login_tomtom" id="login_tomtom">
        <style type="text/css">
            .hy-tmpl-login_tomtom {
                height: 100%;
                display: flex;
                flex-direction: column;
                align-items: center
            }

            .hy-tmpl-login_tomtom-form {
                position: relative;
                width: 100%
            }

            .hy-tmpl-login_tomtom-logo {
                display: block;
                position: relative;
                width: 90vw;
                height: 25vw;
                margin: 20vw auto;
                background-position: center center;
                background-repeat: no-repeat;
                background-size: contain
            }

            .hy-tmpl-login_tomtom-row {
                margin-bottom: 1em
            }

            .hidden {
                display: none;
            }
        </style>

<form class="hy-tmpl-login_tomtom-form" action="/" method="post">
    <div class="hy-tmpl-login_tomtom-logo" style="background-image: url('./logo.png');"></div>
    <span data-i18n="pair.apikey_instructions"></span><a href="https://developer.tomtom.com"/>https://developer.tomtom.com</a><br><br>
    <div class="hy-tmpl-login_tomtom-row row">
        <label class="hy-label hy-tmpl-login_tomtom-label" for="apikey" data-i18n="pair.apikey"></label>
        <input class="hy-input-text" name="apikey" type="text" value="" placeholder="">
    </div>

    <div class="hy-tmpl-login_tomtom-row row">
        <input class="hy-button hy-button-primary hy-button-fill hy-tmpl-login_tomtom-submit button" type="submit"
            value="">
    </div>
</form>
<script type="text/javascript">!function () {
    var e = document.getElementById("login_tomtom"),
        o = e.querySelector(".hy-tmpl-login_tomtom-form"),
        r = e.querySelector(".hy-tmpl-login_tomtom-logo"),
        l = e.querySelector('input[name="apikey"]'),
        lgn = e.querySelector('input[type="submit"]'),
        m = !1; 

        Homey.on('set_apikey', function (apikey) {
            console.log(apikey)
            l.value = apikey;
        });
       
        Homey.setTitle(Homey.__("$tmpl.login_credentials.title")),
        lgn.value = Homey.__("pair.login");

        o.addEventListener("submit", function (e) { 
            if (e.preventDefault(), !m) { 
                m = !0, 
                Homey.showLoadingOverlay(Homey.__("$tmpl.login_credentials.loading")); 
                var z = l.value;

                return Homey.emit("login_tomtom", { apikey: z }, function (e, o) { 
                    if(e) {
                        Homey.error(e)
                    } else if(z) {
                        Homey.nextView()
                    } else {
                        Homey.error(Homey.__("$tmpl.login_credentials.invalid_credentials"))
                    }

                    m = !1;
                    Homey.hideLoadingOverlay();
                })
            }
        });
    }()
</script>